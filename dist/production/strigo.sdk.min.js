(()=>{var St=Object.defineProperty;var ut=(e,t)=>{for(var i in t)St(e,i,{get:t[i],enumerable:!0})};var d=typeof window!="undefined"?window:null,ee=d===null,P=ee?void 0:d.document,v="addEventListener",E="removeEventListener",Q="getBoundingClientRect",z="_a",y="_b",I="_c",V="horizontal",O=function(){return!1},gt=ee?"calc":["","-webkit-","-moz-","-o-"].filter(function(e){var t=P.createElement("div");return t.style.cssText="width:"+e+"calc(9px)",!!t.style.length}).shift()+"calc",ye=function(e){return typeof e=="string"||e instanceof String},Ee=function(e){if(ye(e)){var t=P.querySelector(e);if(!t)throw new Error("Selector "+e+" did not match a DOM element");return t}return e},m=function(e,t,i){var a=e[t];return a!==void 0?a:i},H=function(e,t,i,a){if(t){if(a==="end")return 0;if(a==="center")return e/2}else if(i){if(a==="start")return 0;if(a==="center")return e/2}return e},ft=function(e,t){var i=P.createElement("div");return i.className="gutter gutter-"+t,i},mt=function(e,t,i){var a={};return ye(t)?a[e]=t:a[e]=gt+"("+t+"% - "+i+"px)",a},pt=function(e,t){var i;return i={},i[e]=t+"px",i},dt=function(e,t){if(t===void 0&&(t={}),ee)return{};var i=e,a,l,g,h,T,c;Array.from&&(i=Array.from(i));var _=Ee(i[0]),x=_.parentNode,L=getComputedStyle?getComputedStyle(x):null,b=L?L.flexDirection:null,G=m(t,"sizes")||i.map(function(){return 100/i.length}),j=m(t,"minSize",100),Y=Array.isArray(j)?j:i.map(function(){return j}),W=m(t,"maxSize",1/0),Xe=Array.isArray(W)?W:i.map(function(){return W}),Qe=m(t,"expandToMin",!1),M=m(t,"gutterSize",10),k=m(t,"gutterAlign","center"),Z=m(t,"snapOffset",30),et=Array.isArray(Z)?Z:i.map(function(){return Z}),q=m(t,"dragInterval",1),A=m(t,"direction",V),X=m(t,"cursor",A===V?"col-resize":"row-resize"),tt=m(t,"gutter",ft),ge=m(t,"elementStyle",mt),rt=m(t,"gutterStyle",pt);A===V?(a="width",l="clientX",g="left",h="right",T="clientWidth"):A==="vertical"&&(a="height",l="clientY",g="top",h="bottom",T="clientHeight");function N(o,r,n,s){var f=ge(a,r,n,s);Object.keys(f).forEach(function(u){o.style[u]=f[u]})}function nt(o,r,n){var s=rt(a,r,n);Object.keys(s).forEach(function(f){o.style[f]=s[f]})}function U(){return c.map(function(o){return o.size})}function fe(o){return"touches"in o?o.touches[0][l]:o[l]}function me(o){var r=c[this.a],n=c[this.b],s=r.size+n.size;r.size=o/this.size*s,n.size=s-o/this.size*s,N(r.element,r.size,this[y],r.i),N(n.element,n.size,this[I],n.i)}function ot(o){var r,n=c[this.a],s=c[this.b];!this.dragging||(r=fe(o)-this.start+(this[y]-this.dragOffset),q>1&&(r=Math.round(r/q)*q),r<=n.minSize+n.snapOffset+this[y]?r=n.minSize+this[y]:r>=this.size-(s.minSize+s.snapOffset+this[I])&&(r=this.size-(s.minSize+this[I])),r>=n.maxSize-n.snapOffset+this[y]?r=n.maxSize+this[y]:r<=this.size-(s.maxSize-s.snapOffset+this[I])&&(r=this.size-(s.maxSize+this[I])),me.call(this,r),m(t,"onDrag",O)(U()))}function pe(){var o=c[this.a].element,r=c[this.b].element,n=o[Q](),s=r[Q]();this.size=n[a]+s[a]+this[y]+this[I],this.start=n[g],this.end=n[h]}function it(o){if(!getComputedStyle)return null;var r=getComputedStyle(o);if(!r)return null;var n=o[T];return n===0?null:(A===V?n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight):n-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),n)}function de(o){var r=it(x);if(r===null||Y.reduce(function(u,p){return u+p},0)>r)return o;var n=0,s=[],f=o.map(function(u,p){var R=r*u/100,B=H(M,p===0,p===o.length-1,k),F=Y[p]+B;return R<F?(n+=F-R,s.push(0),F):(s.push(R-F),R)});return n===0?o:f.map(function(u,p){var R=u;if(n>0&&s[p]-n>0){var B=Math.min(n,s[p]-n);n-=B,R=u-B}return R/r*100})}function st(){var o=this,r=c[o.a].element,n=c[o.b].element;o.dragging&&m(t,"onDragEnd",O)(U()),o.dragging=!1,d[E]("mouseup",o.stop),d[E]("touchend",o.stop),d[E]("touchcancel",o.stop),d[E]("mousemove",o.move),d[E]("touchmove",o.move),o.stop=null,o.move=null,r[E]("selectstart",O),r[E]("dragstart",O),n[E]("selectstart",O),n[E]("dragstart",O),r.style.userSelect="",r.style.webkitUserSelect="",r.style.MozUserSelect="",r.style.pointerEvents="",n.style.userSelect="",n.style.webkitUserSelect="",n.style.MozUserSelect="",n.style.pointerEvents="",o.gutter.style.cursor="",o.parent.style.cursor="",P.body.style.cursor=""}function at(o){if(!("button"in o&&o.button!==0)){var r=this,n=c[r.a].element,s=c[r.b].element;r.dragging||m(t,"onDragStart",O)(U()),o.preventDefault(),r.dragging=!0,r.move=ot.bind(r),r.stop=st.bind(r),d[v]("mouseup",r.stop),d[v]("touchend",r.stop),d[v]("touchcancel",r.stop),d[v]("mousemove",r.move),d[v]("touchmove",r.move),n[v]("selectstart",O),n[v]("dragstart",O),s[v]("selectstart",O),s[v]("dragstart",O),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.MozUserSelect="none",n.style.pointerEvents="none",s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none",s.style.pointerEvents="none",r.gutter.style.cursor=X,r.parent.style.cursor=X,P.body.style.cursor=X,pe.call(r),r.dragOffset=fe(o)-r.end}}G=de(G);var w=[];c=i.map(function(o,r){var n={element:Ee(o),size:G[r],minSize:Y[r],maxSize:Xe[r],snapOffset:et[r],i:r},s;if(r>0&&(s={a:r-1,b:r,dragging:!1,direction:A,parent:x},s[y]=H(M,r-1===0,!1,k),s[I]=H(M,!1,r===i.length-1,k),b==="row-reverse"||b==="column-reverse")){var f=s.a;s.a=s.b,s.b=f}if(r>0){var u=tt(r,A,n.element);nt(u,M,r),s[z]=at.bind(s),u[v]("mousedown",s[z]),u[v]("touchstart",s[z]),x.insertBefore(u,n.element),s.gutter=u}return N(n.element,n.size,H(M,r===0,r===i.length-1,k),r),r>0&&w.push(s),n});function ve(o){var r=o.i===w.length,n=r?w[o.i-1]:w[o.i];pe.call(n);var s=r?n.size-o.minSize-n[I]:o.minSize+n[y];me.call(n,s)}c.forEach(function(o){var r=o.element[Q]()[a];r<o.minSize&&(Qe?ve(o):o.minSize=r)});function lt(o){var r=de(o);r.forEach(function(n,s){if(s>0){var f=w[s-1],u=c[f.a],p=c[f.b];u.size=r[s-1],p.size=n,N(u.element,u.size,f[y],u.i),N(p.element,p.size,f[I],p.i)}})}function ct(o,r){w.forEach(function(n){if(r!==!0?n.parent.removeChild(n.gutter):(n.gutter[E]("mousedown",n[z]),n.gutter[E]("touchstart",n[z])),o!==!0){var s=ge(a,n.a.size,n[y]);Object.keys(s).forEach(function(f){c[n.a].element.style[f]="",c[n.b].element.style[f]=""})}})}return{setSizes:lt,getSizes:U,collapse:function(r){ve(c[r])},destroy:ct,parent:x,pairs:w}},Oe=dt;function he(){return document.getElementsByTagName("head")[0]}function Ie(){document.open(),document.close()}function Te(){let e=document.createElement("div");return e.className="strigo-main",document.body.appendChild(e),e}function xe(e){let{url:t,parentElement:i}=e,a=document.createElement("link");a.rel="stylesheet",a.href=t,i.appendChild(a)}function te(e){let{url:t,parentElement:i,classNames:a,id:l}=e,g=document.createElement("iframe");return g.classList.add(...a),g.id=l,g.src=t,i.appendChild(g),g}function we(){location.reload()}function Re(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}var Ce="strigo-sdk",Ae="strigo.io",_e="localhost:3000",Le="https://cdn.jsdelivr.net/gh/strigo/strigo-sdk@latest/dist/production/styles/strigo.min.css",be=["strigo-exercises"],Ge=["orig-iframe"],Me=0,Ne=450;function Et(e){let t={};for(let[i,a]of e)t[i]=a;return t}function ze(){let{host:e,pathname:t,href:i,origin:a,search:l}=window.location;return{host:e,pathName:t,href:i,origin:a,search:l,params:yt(l)}}function yt(e){let i=new URLSearchParams(e).entries();return Et(i)}function Pe(e){let{subDomain:t,token:i,webApiKey:a,development:l}=e;return l?`http://${_e}/libro/courses?token=${i.token}&webApiKey=${a}`:`https://${t}.${Ae}/libro/courses?token=${i.token}&webApiKey=${a}`}function De(){let e=document.getElementById(Ce);return{webApiKey:e.getAttribute("data-web-api-key"),subDomain:e.getAttribute("data-subdomain")}}var S={log(e,t,i){try{let a=`${new Date().toISOString()} - ${t}`;console[e](a,i?`
${JSON.stringify(i)}`:"")}catch(a){console.log("Logging error:",a)}},debug(e,t={}){this.log("debug",e,t)},info(e,t={}){this.log("info",e,t)},warn(e,t={}){this.log("warn",e,t)},error(e,t={}){this.log("error",e,t)}};function C(e,t){try{return JSON.parse(window[e].getItem(t))}catch(i){return S.error(i),null}}function K(e,t,i){try{return window[e].setItem(t,JSON.stringify(i)),i}catch(a){return S.error(a),null}}function re(e,t,i,a){try{let l=C(e,t);if(!l)throw new Error("Can't find initial state");let g={...l,[i]:a};return window[e].setItem(t,JSON.stringify(g)),g}catch(l){return S.error(l),null}}function D(e,t){try{window[e].removeItem(t)}catch(i){S.error(i)}}function Ue(){return C("localStorage","strigoConfig")}function Be(e){return K("localStorage","strigoConfig",e)}function J(){return C("localStorage","strigoConfig")}function Fe(){D("localStorage","strigoConfig")}var le={};ut(le,{clearSession:()=>ae,getSession:()=>Ve,init:()=>oe,isPanelOpen:()=>se,setSessionValue:()=>It,setup:()=>ie});function oe(){let e=C("sessionStorage","strigoSession");return e}function ie(e){return K("sessionStorage","strigoSession",e)}function se(){return Ve()?.isPanelOpen}function Ve(){return C("sessionStorage","strigoSession")}function It(e,t){return re("sessionStorage","strigoSession",e,t)}function ae(){D("sessionStorage","strigoSession")}window.onunload=function(){D("sessionStorage","strigoSession")};function He(){try{let e=$();if(e)return S.debug("Events storage already exists"),e;let t={events:[]};return window["localStorage"].setItem("strigoEvents",JSON.stringify(t)),t}catch(e){return S.error("Init events storage error",{error:e}),null}}function $(){try{return JSON.parse(window["localStorage"].getItem("strigoEvents"))}catch(e){return S.error("Get events storage error",{error:e}),null}}function Ke(e){try{let t=$();if(!t)throw new Error("Can't find initial state");return t.events.push(e),window["localStorage"].setItem("strigoEvents",JSON.stringify(t)),t}catch(t){return S.error("Push event to storage error",{error:t}),null}}function Je(){try{let e=$();if(!e)throw new Error("Can't find events storage");let t=e.events.pop();return window["localStorage"].setItem("strigoEvents",JSON.stringify(e)),t}catch(e){return S.error("Pop event from storage error",{error:e}),null}}function ce(){try{let e=$();if(!e)throw new Error("Can't find events storage");return e.events.pop()}catch(e){return S.error("Get event from storage error",{error:e}),null}}function Se(){let e=ce();if(e){S.info("Posting event",e),window.frames[0].postMessage(e,"*");let t=Je();e.eventName!==t.eventName&&console.error("Events storage error: popped event doesn't match new event",{newEvent:e,poppedEvent:t})}}function je(){for(;ce();)Se()}function Tt({key:e,oldValue:t,newValue:i}){if(e!=="strigoEvents")return;let a=JSON.parse(i)?.events,l=JSON.parse(t)?.events;a.filter(({eventName:h})=>!l.some(({eventName:T})=>h===T)).length>0&&Se()}function We(){window.addEventListener("message",e=>{if(!(!e||!e.data))switch(e.data){case"close":{window.StrigoSDK&&window.StrigoSDK.shutdown();break}default:break}},!1),window.addEventListener("storage",Tt)}var wt=`
<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto; animation-play-state: running; animation-delay: 0s;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
<circle cx="50" cy="50" r="0" fill="none" stroke="#ffffff" stroke-width="2" style="animation-play-state: running; animation-delay: 0s;">
  <animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="0s" style="animation-play-state: running; animation-delay: 0s;"></animate>
  <animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="0s" style="animation-play-state: running; animation-delay: 0s;"></animate>
</circle><circle cx="50" cy="50" r="0" fill="none" stroke="#f1f1f9" stroke-width="2" style="animation-play-state: running; animation-delay: 0s;">
  <animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.5s" style="animation-play-state: running; animation-delay: 0s;"></animate>
  <animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.5s" style="animation-play-state: running; animation-delay: 0s;"></animate>
</circle>
</svg>`;function Ze(){let e=document.createElement("div");e.className="strigo-loader",e.innerHTML=wt,document.body.appendChild(e)}function qe(e){let t=document.querySelector(".strigo-loader"),i=()=>{let a=setInterval(()=>{t.style.opacity||(t.style.opacity="1");let l=parseFloat(t.style.opacity);l>0?t.style.opacity=(l-.1).toString():(t.style.pointerEvents="none",clearInterval(a))},200)};e.addEventListener("load",i)}var ue;(g=>{function t(){Ue(),oe(),He(),le&&se()?(g.SDKType="SUBSCRIBER",window.dispatchEvent(new Event("strigo-opened"))):g.SDKType="HOST",S.info("init called")}g.init=t;function i(h){if(g.SDKType==="SUBSCRIBER")return;S.info("setup started");let{email:T,token:c,development:_=!1}=h,{webApiKey:x,subDomain:L}=De();if(!_&&(!T||!c||!x||!L)){S.error("Please provide setup data");return}Be({email:T,initSite:ze(),token:c,webApiKey:x,subDomain:L,development:_}),Ie(),xe({parentElement:he(),url:_?`http://localhost:${SDK_HOSTING_PORT}/styles/strigo.css`:Le}),Ze();let b=Te(),G=te({parentElement:b,url:Pe(J()),classNames:be,id:"exercises"});qe(G),te({parentElement:b,url:J().initSite.href,classNames:Ge,id:"original-site"}),Oe(["#exercises","#original-site"],{sizes:[25,75],minSize:Re()?Me:Ne}),ie({currentUrl:J().initSite.href,isPanelOpen:!0}),je(),We(),S.info("setup finished")}g.setup=i;function a(){S.info("shutdown called"),Fe(),ae(),we()}g.shutdown=a;function l(h){Ke({eventName:h}),S.debug("sendEvent called",{eventName:h})}g.sendEvent=l})(ue||={});window.StrigoSDK=ue;window.StrigoSDK.init();})();
