(()=>{var it=Object.defineProperty;var st=(e,r)=>{for(var i in r)it(e,i,{get:r[i],enumerable:!0})};var p=typeof window!="undefined"?window:null,Q=p===null,N=Q?void 0:p.document,v="addEventListener",d="removeEventListener",X="getBoundingClientRect",M="_a",E="_b",T="_c",F="horizontal",O=function(){return!1},at=Q?"calc":["","-webkit-","-moz-","-o-"].filter(function(e){var r=N.createElement("div");return r.style.cssText="width:"+e+"calc(9px)",!!r.style.length}).shift()+"calc",Ee=function(e){return typeof e=="string"||e instanceof String},de=function(e){if(Ee(e)){var r=N.querySelector(e);if(!r)throw new Error("Selector "+e+" did not match a DOM element");return r}return e},f=function(e,r,i){var a=e[r];return a!==void 0?a:i},k=function(e,r,i,a){if(r){if(a==="end")return 0;if(a==="center")return e/2}else if(i){if(a==="start")return 0;if(a==="center")return e/2}return e},lt=function(e,r){var i=N.createElement("div");return i.className="gutter gutter-"+r,i},St=function(e,r,i){var a={};return Ee(r)?a[e]=r:a[e]=at+"("+r+"% - "+i+"px)",a},ct=function(e,r){var i;return i={},i[e]=r+"px",i},ut=function(e,r){if(r===void 0&&(r={}),Q)return{};var i=e,a,c,g,h,I,l;Array.from&&(i=Array.from(i));var b=de(i[0]),y=b.parentNode,w=getComputedStyle?getComputedStyle(y):null,C=w?w.flexDirection:null,J=f(r,"sizes")||i.map(function(){return 100/i.length}),j=f(r,"minSize",100),$=Array.isArray(j)?j:i.map(function(){return j}),W=f(r,"maxSize",1/0),$e=Array.isArray(W)?W:i.map(function(){return W}),We=f(r,"expandToMin",!1),G=f(r,"gutterSize",10),D=f(r,"gutterAlign","center"),Y=f(r,"snapOffset",30),Ye=Array.isArray(Y)?Y:i.map(function(){return Y}),Z=f(r,"dragInterval",1),_=f(r,"direction",F),q=f(r,"cursor",_===F?"col-resize":"row-resize"),Ze=f(r,"gutter",lt),ue=f(r,"elementStyle",St),qe=f(r,"gutterStyle",ct);_===F?(a="width",c="clientX",g="left",h="right",I="clientWidth"):_==="vertical"&&(a="height",c="clientY",g="top",h="bottom",I="clientHeight");function z(o,t,n,s){var u=ue(a,t,n,s);Object.keys(u).forEach(function(S){o.style[S]=u[S]})}function Xe(o,t,n){var s=qe(a,t,n);Object.keys(s).forEach(function(u){o.style[u]=s[u]})}function P(){return l.map(function(o){return o.size})}function ge(o){return"touches"in o?o.touches[0][c]:o[c]}function fe(o){var t=l[this.a],n=l[this.b],s=t.size+n.size;t.size=o/this.size*s,n.size=s-o/this.size*s,z(t.element,t.size,this[E],t.i),z(n.element,n.size,this[T],n.i)}function Qe(o){var t,n=l[this.a],s=l[this.b];!this.dragging||(t=ge(o)-this.start+(this[E]-this.dragOffset),Z>1&&(t=Math.round(t/Z)*Z),t<=n.minSize+n.snapOffset+this[E]?t=n.minSize+this[E]:t>=this.size-(s.minSize+s.snapOffset+this[T])&&(t=this.size-(s.minSize+this[T])),t>=n.maxSize-n.snapOffset+this[E]?t=n.maxSize+this[E]:t<=this.size-(s.maxSize-s.snapOffset+this[T])&&(t=this.size-(s.maxSize+this[T])),fe.call(this,t),f(r,"onDrag",O)(P()))}function me(){var o=l[this.a].element,t=l[this.b].element,n=o[X](),s=t[X]();this.size=n[a]+s[a]+this[E]+this[T],this.start=n[g],this.end=n[h]}function et(o){if(!getComputedStyle)return null;var t=getComputedStyle(o);if(!t)return null;var n=o[I];return n===0?null:(_===F?n-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight):n-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),n)}function pe(o){var t=et(y);if(t===null||$.reduce(function(S,m){return S+m},0)>t)return o;var n=0,s=[],u=o.map(function(S,m){var R=t*S/100,U=k(G,m===0,m===o.length-1,D),B=$[m]+U;return R<B?(n+=B-R,s.push(0),B):(s.push(R-B),R)});return n===0?o:u.map(function(S,m){var R=S;if(n>0&&s[m]-n>0){var U=Math.min(n,s[m]-n);n-=U,R=S-U}return R/t*100})}function tt(){var o=this,t=l[o.a].element,n=l[o.b].element;o.dragging&&f(r,"onDragEnd",O)(P()),o.dragging=!1,p[d]("mouseup",o.stop),p[d]("touchend",o.stop),p[d]("touchcancel",o.stop),p[d]("mousemove",o.move),p[d]("touchmove",o.move),o.stop=null,o.move=null,t[d]("selectstart",O),t[d]("dragstart",O),n[d]("selectstart",O),n[d]("dragstart",O),t.style.userSelect="",t.style.webkitUserSelect="",t.style.MozUserSelect="",t.style.pointerEvents="",n.style.userSelect="",n.style.webkitUserSelect="",n.style.MozUserSelect="",n.style.pointerEvents="",o.gutter.style.cursor="",o.parent.style.cursor="",N.body.style.cursor=""}function rt(o){if(!("button"in o&&o.button!==0)){var t=this,n=l[t.a].element,s=l[t.b].element;t.dragging||f(r,"onDragStart",O)(P()),o.preventDefault(),t.dragging=!0,t.move=Qe.bind(t),t.stop=tt.bind(t),p[v]("mouseup",t.stop),p[v]("touchend",t.stop),p[v]("touchcancel",t.stop),p[v]("mousemove",t.move),p[v]("touchmove",t.move),n[v]("selectstart",O),n[v]("dragstart",O),s[v]("selectstart",O),s[v]("dragstart",O),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.MozUserSelect="none",n.style.pointerEvents="none",s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none",s.style.pointerEvents="none",t.gutter.style.cursor=q,t.parent.style.cursor=q,N.body.style.cursor=q,me.call(t),t.dragOffset=ge(o)-t.end}}J=pe(J);var x=[];l=i.map(function(o,t){var n={element:de(o),size:J[t],minSize:$[t],maxSize:$e[t],snapOffset:Ye[t],i:t},s;if(t>0&&(s={a:t-1,b:t,dragging:!1,direction:_,parent:y},s[E]=k(G,t-1===0,!1,D),s[T]=k(G,!1,t===i.length-1,D),C==="row-reverse"||C==="column-reverse")){var u=s.a;s.a=s.b,s.b=u}if(t>0){var S=Ze(t,_,n.element);Xe(S,G,t),s[M]=rt.bind(s),S[v]("mousedown",s[M]),S[v]("touchstart",s[M]),y.insertBefore(S,n.element),s.gutter=S}return z(n.element,n.size,k(G,t===0,t===i.length-1,D),t),t>0&&x.push(s),n});function ve(o){var t=o.i===x.length,n=t?x[o.i-1]:x[o.i];me.call(n);var s=t?n.size-o.minSize-n[T]:o.minSize+n[E];fe.call(n,s)}l.forEach(function(o){var t=o.element[X]()[a];t<o.minSize&&(We?ve(o):o.minSize=t)});function nt(o){var t=pe(o);t.forEach(function(n,s){if(s>0){var u=x[s-1],S=l[u.a],m=l[u.b];S.size=t[s-1],m.size=n,z(S.element,S.size,u[E],S.i),z(m.element,m.size,u[T],m.i)}})}function ot(o,t){x.forEach(function(n){if(t!==!0?n.parent.removeChild(n.gutter):(n.gutter[d]("mousedown",n[M]),n.gutter[d]("touchstart",n[M])),o!==!0){var s=ue(a,n.a.size,n[E]);Object.keys(s).forEach(function(u){l[n.a].element.style[u]="",l[n.b].element.style[u]=""})}})}return{setSizes:nt,getSizes:P,collapse:function(t){ve(l[t])},destroy:ot,parent:y,pairs:x}},Oe=ut;function he(){return document.getElementsByTagName("head")[0]}function Te(){document.open(),document.close()}function Ie(){let e=document.createElement("div");return e.className="strigo-main",document.body.appendChild(e),e}function ye(e){let{url:r,parentElement:i}=e,a=document.createElement("link");a.rel="stylesheet",a.href=r,i.appendChild(a)}function ee(e){let{url:r,parentElement:i,classNames:a,id:c}=e,g=document.createElement("iframe");g.classList.add(...a),g.id=c,g.src=r,i.appendChild(g)}function xe(){location.reload()}function Re(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}var Ae="strigo.io",we="localhost:3000",_e="https://cdn.jsdelivr.net/gh/strigo/strigo-sdk@latest/dist/production/styles/strigo.min.css",Ce=["strigo-exercises"],Ge=["orig-iframe"],ze=0,Me=450;function ft(e){let r={};for(let[i,a]of e)r[i]=a;return r}function Ne(){let{host:e,pathname:r,href:i,origin:a,search:c}=window.location;return{host:e,pathName:r,href:i,origin:a,search:c,params:mt(c)}}function mt(e){let i=new URLSearchParams(e).entries();return ft(i)}function Le(e){let{subDomain:r,token:i,webApiKey:a,development:c}=e;return c?`http://${we}/libro/courses?token=${i.token}&webApiKey=${a}`:`https://${r}.${Ae}/libro/courses?token=${i.token}&webApiKey=${a}`}function A(e,r){try{return JSON.parse(window[e].getItem(r))}catch(i){return console.log(i),null}}function V(e,r,i){try{return window[e].setItem(r,JSON.stringify(i)),i}catch(a){return console.log(a),null}}function te(e,r,i,a){try{let c=A(e,r);if(!c)throw new Error("Can't find initial state");let g={...c,[i]:a};return window[e].setItem(r,JSON.stringify(g)),g}catch(c){return console.log(c),null}}function L(e,r){try{window[e].removeItem(r)}catch(i){console.log(i)}}function De(){return A("localStorage","strigoConfig")}function Pe(e){return V("localStorage","strigoConfig",e)}function K(){return A("localStorage","strigoConfig")}function Ue(){L("localStorage","strigoConfig")}var ae={};st(ae,{clearSession:()=>se,getSession:()=>Be,init:()=>ne,isPanelOpen:()=>ie,setSessionValue:()=>dt,setup:()=>oe});function ne(){let e=A("sessionStorage","strigoSession");return e}function oe(e){return V("sessionStorage","strigoSession",e)}function ie(){return Be()?.isPanelOpen}function Be(){return A("sessionStorage","strigoSession")}function dt(e,r){return te("sessionStorage","strigoSession",e,r)}function se(){L("sessionStorage","strigoSession")}window.onunload=function(){L("sessionStorage","strigoSession")};function Fe(){try{let e=H();if(e)return console.log("Events storage already exists"),e;let r={events:[]};return window["localStorage"].setItem("strigoEvents",JSON.stringify(r)),r}catch(e){return console.log("Init events storage error",{error:e}),null}}function H(){try{return JSON.parse(window["localStorage"].getItem("strigoEvents"))}catch(e){return console.log("Get events storage error",{error:e}),null}}function ke(e){try{let r=H();if(!r)throw new Error("Can't find initial state");return r.events.push(e),window["localStorage"].setItem("strigoEvents",JSON.stringify(r)),r}catch(r){return console.log("Push event to storage error",{error:r}),null}}function Ve(){try{let e=H();if(!e)throw new Error("Can't find events storage");let r=e.events.pop();return window["localStorage"].setItem("strigoEvents",JSON.stringify(e)),r}catch(e){return console.log("Pop event from storage error",{error:e}),null}}function le(){try{let e=H();if(!e)throw new Error("Can't find events storage");return e.events.pop()}catch(e){return console.log("Get event from storage error",{error:e}),null}}function Se(){let e=le();if(e){console.log("Posting event",e),window.frames[0].postMessage(e,"*");let r=Ve();e.eventName!==r.eventName&&console.error("Events storage error: popped event doesn't match new event",{newEvent:e,poppedEvent:r})}}function He(){for(;le();)Se()}function Et({key:e,oldValue:r,newValue:i}){if(e!=="strigoEvents")return;let a=JSON.parse(i)?.events,c=JSON.parse(r)?.events;a.filter(({eventName:h})=>!c.some(({eventName:I})=>h===I)).length>0&&Se()}function je(){window.addEventListener("message",e=>{if(!(!e||!e.data))switch(e.data){case"close":{window.StrigoSDK&&window.StrigoSDK.shutdown();break}default:break}},!1),window.addEventListener("storage",Et)}var ce;(g=>{function r(){De(),ne(),Fe(),ae&&ie()?g.SDKType="SUBSCRIBER":g.SDKType="HOST",console.log("init called")}g.init=r;function i(h){if(g.SDKType==="SUBSCRIBER")return;console.log("setup started");let{email:I,token:l,webApiKey:b,subDomain:y,development:w=!1}=h;if(!w&&(!I||!l||!b||!y)){console.log("Please provide setup data");return}Pe({email:I,initSite:Ne(),token:l,webApiKey:b,subDomain:y,development:w}),Te(),ye({parentElement:he(),url:w?`http://localhost:${SDK_HOSTING_PORT}/styles/strigo.css`:_e});let C=Ie();ee({parentElement:C,url:Le(K()),classNames:Ce,id:"exercises"}),ee({parentElement:C,url:K().initSite.href,classNames:Ge,id:"original-site"}),Oe(["#exercises","#original-site"],{sizes:[25,75],minSize:Re()?ze:Me}),oe({currentUrl:K().initSite.href,isPanelOpen:!0}),He(),je(),console.log("setup finished")}g.setup=i;function a(){console.log("shutdown called"),Ue(),se(),xe()}g.shutdown=a;function c(h){ke({eventName:h}),console.log("sendEvent called",{eventName:h})}g.sendEvent=c})(ce||={});window.StrigoSDK=ce;window.StrigoSDK.init();})();
