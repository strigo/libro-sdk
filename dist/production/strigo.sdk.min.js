(()=>{var ft=Object.defineProperty;var mt=(e,t)=>{for(var i in t)ft(e,i,{get:t[i],enumerable:!0})};var v=typeof window!="undefined"?window:null,re=v===null,P=re?void 0:v.document,E="addEventListener",O="removeEventListener",te="getBoundingClientRect",D="_a",h="_b",T="_c",J="horizontal",y=function(){return!1},pt=re?"calc":["","-webkit-","-moz-","-o-"].filter(function(e){var t=P.createElement("div");return t.style.cssText="width:"+e+"calc(9px)",!!t.style.length}).shift()+"calc",Te=function(e){return typeof e=="string"||e instanceof String},ye=function(e){if(Te(e)){var t=P.querySelector(e);if(!t)throw new Error("Selector "+e+" did not match a DOM element");return t}return e},m=function(e,t,i){var a=e[t];return a!==void 0?a:i},$=function(e,t,i,a){if(t){if(a==="end")return 0;if(a==="center")return e/2}else if(i){if(a==="start")return 0;if(a==="center")return e/2}return e},dt=function(e,t){var i=P.createElement("div");return i.className="gutter gutter-"+t,i},vt=function(e,t,i){var a={};return Te(t)?a[e]=t:a[e]=pt+"("+t+"% - "+i+"px)",a},Et=function(e,t){var i;return i={},i[e]=t+"px",i},Ot=function(e,t){if(t===void 0&&(t={}),re)return{};var i=e,a,g,S,p,w,c;Array.from&&(i=Array.from(i));var G=ye(i[0]),I=G.parentNode,b=getComputedStyle?getComputedStyle(I):null,z=b?b.flexDirection:null,A=m(t,"sizes")||i.map(function(){return 100/i.length}),_=m(t,"minSize",100),q=Array.isArray(_)?_:i.map(function(){return _}),X=m(t,"maxSize",1/0),tt=Array.isArray(X)?X:i.map(function(){return X}),rt=m(t,"expandToMin",!1),N=m(t,"gutterSize",10),F=m(t,"gutterAlign","center"),Z=m(t,"snapOffset",30),nt=Array.isArray(Z)?Z:i.map(function(){return Z}),Q=m(t,"dragInterval",1),L=m(t,"direction",J),ee=m(t,"cursor",L===J?"col-resize":"row-resize"),ot=m(t,"gutter",dt),pe=m(t,"elementStyle",vt),it=m(t,"gutterStyle",Et);L===J?(a="width",g="clientX",S="left",p="right",w="clientWidth"):L==="vertical"&&(a="height",g="clientY",S="top",p="bottom",w="clientHeight");function M(o,r,n,s){var f=pe(a,r,n,s);Object.keys(f).forEach(function(u){o.style[u]=f[u]})}function st(o,r,n){var s=it(a,r,n);Object.keys(s).forEach(function(f){o.style[f]=s[f]})}function B(){return c.map(function(o){return o.size})}function de(o){return"touches"in o?o.touches[0][g]:o[g]}function ve(o){var r=c[this.a],n=c[this.b],s=r.size+n.size;r.size=o/this.size*s,n.size=s-o/this.size*s,M(r.element,r.size,this[h],r.i),M(n.element,n.size,this[T],n.i)}function at(o){var r,n=c[this.a],s=c[this.b];!this.dragging||(r=de(o)-this.start+(this[h]-this.dragOffset),Q>1&&(r=Math.round(r/Q)*Q),r<=n.minSize+n.snapOffset+this[h]?r=n.minSize+this[h]:r>=this.size-(s.minSize+s.snapOffset+this[T])&&(r=this.size-(s.minSize+this[T])),r>=n.maxSize-n.snapOffset+this[h]?r=n.maxSize+this[h]:r<=this.size-(s.maxSize-s.snapOffset+this[T])&&(r=this.size-(s.maxSize+this[T])),ve.call(this,r),m(t,"onDrag",y)(B()))}function Ee(){var o=c[this.a].element,r=c[this.b].element,n=o[te](),s=r[te]();this.size=n[a]+s[a]+this[h]+this[T],this.start=n[S],this.end=n[p]}function ct(o){if(!getComputedStyle)return null;var r=getComputedStyle(o);if(!r)return null;var n=o[w];return n===0?null:(L===J?n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight):n-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),n)}function Oe(o){var r=ct(I);if(r===null||q.reduce(function(u,d){return u+d},0)>r)return o;var n=0,s=[],f=o.map(function(u,d){var R=r*u/100,V=$(N,d===0,d===o.length-1,F),H=q[d]+V;return R<H?(n+=H-R,s.push(0),H):(s.push(R-H),R)});return n===0?o:f.map(function(u,d){var R=u;if(n>0&&s[d]-n>0){var V=Math.min(n,s[d]-n);n-=V,R=u-V}return R/r*100})}function lt(){var o=this,r=c[o.a].element,n=c[o.b].element;o.dragging&&m(t,"onDragEnd",y)(B()),o.dragging=!1,v[O]("mouseup",o.stop),v[O]("touchend",o.stop),v[O]("touchcancel",o.stop),v[O]("mousemove",o.move),v[O]("touchmove",o.move),o.stop=null,o.move=null,r[O]("selectstart",y),r[O]("dragstart",y),n[O]("selectstart",y),n[O]("dragstart",y),r.style.userSelect="",r.style.webkitUserSelect="",r.style.MozUserSelect="",r.style.pointerEvents="",n.style.userSelect="",n.style.webkitUserSelect="",n.style.MozUserSelect="",n.style.pointerEvents="",o.gutter.style.cursor="",o.parent.style.cursor="",P.body.style.cursor=""}function ut(o){if(!("button"in o&&o.button!==0)){var r=this,n=c[r.a].element,s=c[r.b].element;r.dragging||m(t,"onDragStart",y)(B()),o.preventDefault(),r.dragging=!0,r.move=at.bind(r),r.stop=lt.bind(r),v[E]("mouseup",r.stop),v[E]("touchend",r.stop),v[E]("touchcancel",r.stop),v[E]("mousemove",r.move),v[E]("touchmove",r.move),n[E]("selectstart",y),n[E]("dragstart",y),s[E]("selectstart",y),s[E]("dragstart",y),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.MozUserSelect="none",n.style.pointerEvents="none",s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none",s.style.pointerEvents="none",r.gutter.style.cursor=ee,r.parent.style.cursor=ee,P.body.style.cursor=ee,Ee.call(r),r.dragOffset=de(o)-r.end}}A=Oe(A);var x=[];c=i.map(function(o,r){var n={element:ye(o),size:A[r],minSize:q[r],maxSize:tt[r],snapOffset:nt[r],i:r},s;if(r>0&&(s={a:r-1,b:r,dragging:!1,direction:L,parent:I},s[h]=$(N,r-1===0,!1,F),s[T]=$(N,!1,r===i.length-1,F),z==="row-reverse"||z==="column-reverse")){var f=s.a;s.a=s.b,s.b=f}if(r>0){var u=ot(r,L,n.element);st(u,N,r),s[D]=ut.bind(s),u[E]("mousedown",s[D]),u[E]("touchstart",s[D]),I.insertBefore(u,n.element),s.gutter=u}return M(n.element,n.size,$(N,r===0,r===i.length-1,F),r),r>0&&x.push(s),n});function he(o){var r=o.i===x.length,n=r?x[o.i-1]:x[o.i];Ee.call(n);var s=r?n.size-o.minSize-n[T]:o.minSize+n[h];ve.call(n,s)}c.forEach(function(o){var r=o.element[te]()[a];r<o.minSize&&(rt?he(o):o.minSize=r)});function gt(o){var r=Oe(o);r.forEach(function(n,s){if(s>0){var f=x[s-1],u=c[f.a],d=c[f.b];u.size=r[s-1],d.size=n,M(u.element,u.size,f[h],u.i),M(d.element,d.size,f[T],d.i)}})}function St(o,r){x.forEach(function(n){if(r!==!0?n.parent.removeChild(n.gutter):(n.gutter[O]("mousedown",n[D]),n.gutter[O]("touchstart",n[D])),o!==!0){var s=pe(a,n.a.size,n[h]);Object.keys(s).forEach(function(f){c[n.a].element.style[f]="",c[n.b].element.style[f]=""})}})}return{setSizes:gt,getSizes:B,collapse:function(r){he(c[r])},destroy:St,parent:I,pairs:x}},we=Ot;function Ie(){return document.getElementsByTagName("head")[0]}function xe(){document.open(),document.close()}function Re(){let e=document.createElement("div");return e.className="strigo-main",document.body.appendChild(e),e}function Ce(e){let{url:t,parentElement:i}=e,a=document.createElement("link");a.rel="stylesheet",a.href=t,i.appendChild(a)}function ne(e){let{url:t,parentElement:i,classNames:a,id:g}=e,S=document.createElement("iframe");return S.classList.add(...a),S.id=g,S.src=t,i.appendChild(S),S}function Ae(){location.reload()}function Le(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function Ge(){return Le()?[window.screen.width,window.screen.width]:[window.screen.width/2,window.screen.width]}function be(){return Le()?[0,0]:[window.screen.width*.25,0]}var ze="strigo-sdk",_e="strigo.io",Ne="localhost:3000",Me=["strigo-exercises"],De=["orig-iframe"];function yt(e){let t={};for(let[i,a]of e)t[i]=a;return t}function Pe(){let{host:e,pathname:t,href:i,origin:a,search:g}=window.location;return{host:e,pathName:t,href:i,origin:a,search:g,params:Tt(g)}}function Tt(e){let i=new URLSearchParams(e).entries();return yt(i)}function ke(e){let{subDomain:t,token:i,webApiKey:a,development:g}=e;return g?`http://${Ne}/libro/courses?token=${i.token}&webApiKey=${a}`:`https://${t}.${_e}/libro/courses?token=${i.token}&webApiKey=${a}`}function Ue(){let e=document.getElementById(ze);return{webApiKey:e?.getAttribute("data-web-api-key")||"",subDomain:e?.getAttribute("data-subdomain")||""}}function Fe(e,t){return e?`http://localhost:${SDK_HOSTING_PORT}/styles/strigo.css`:t?`https://cdn.jsdelivr.net/gh/strigo/strigo-sdk@${t}/dist/production/styles/strigo.min.css`:"https://cdn.jsdelivr.net/gh/strigo/strigo-sdk@latest/dist/production/styles/strigo.min.css"}var l={log(e,t,i){try{let a=`${new Date().toISOString()} - ${t}`;console[e](a,i?`
${JSON.stringify(i)}`:"")}catch(a){console.log("Logging error:",a)}},debug(e,t={}){this.log("debug",e,t)},info(e,t={}){this.log("info",e,t)},warn(e,t={}){this.log("warn",e,t)},error(e,t={}){this.log("error",e,t)}};function C(e,t){try{return JSON.parse(window[e].getItem(t))}catch(i){return l.error(i),null}}function j(e,t,i){try{return window[e].setItem(t,JSON.stringify(i)),i}catch(a){return l.error(a),null}}function oe(e,t,i,a){try{let g=C(e,t);if(!g)throw new Error("Can't find initial state");let S={...g,[i]:a};return window[e].setItem(t,JSON.stringify(S)),S}catch(g){return l.error(g),null}}function k(e,t){try{window[e].removeItem(t)}catch(i){l.error(i)}}function Ve(){return C("localStorage","strigoConfig")}function He(e){return j("localStorage","strigoConfig",e)}function U(){return C("localStorage","strigoConfig")}function Je(){k("localStorage","strigoConfig")}var W={};mt(W,{clearSession:()=>ge,getSession:()=>le,getSessionValue:()=>ue,init:()=>se,isPanelOpen:()=>ce,setSessionValue:()=>K,setup:()=>ae});function se(){return C("sessionStorage","strigoSession")}function ae(e){return j("sessionStorage","strigoSession",e)}function ce(){return le()?.isPanelOpen}function le(){return C("sessionStorage","strigoSession")}function K(e,t){return oe("sessionStorage","strigoSession",e,t)}function ue(e){return le()?.[e]}function ge(){k("sessionStorage","strigoSession")}window.onunload=function(){k("sessionStorage","strigoSession")};function $e(){try{let e=Y();if(e)return l.debug("Events storage already exists"),e;let t={events:[]};return window["localStorage"].setItem("strigoEvents",JSON.stringify(t)),t}catch(e){return l.error("Init events storage error",{error:e}),null}}function Y(){try{return JSON.parse(window["localStorage"].getItem("strigoEvents"))}catch(e){return l.error("Get events storage error",{error:e}),null}}function je(e){try{let t=Y();if(!t)throw new Error("Can't find initial state");return t.events.push(e),window["localStorage"].setItem("strigoEvents",JSON.stringify(t)),t}catch(t){return l.error("Push event to storage error",{error:t}),null}}function Ke(){try{let e=Y();if(!e)throw new Error("Can't find events storage");let t=e.events.pop();return window["localStorage"].setItem("strigoEvents",JSON.stringify(e)),t}catch(e){return l.error("Pop event from storage error",{error:e}),null}}function Se(){try{let e=Y();if(!e)throw new Error("Can't find events storage");return e.events.pop()}catch(e){return l.error("Get event from storage error",{error:e}),null}}function fe(){let e=Se();if(e){l.info("Posting event",e),window.frames[0].postMessage(e,"*");let t=Ke();e.eventName!==t.eventName&&console.error("Events storage error: popped event doesn't match new event",{newEvent:e,poppedEvent:t})}}function Ye(){for(;Se();)fe()}var Rt=`
<div class="circle-loader">
  <svg class="circular" viewBox="25 25 50 50">
  <circle
    class="path"
    cx="50"
    cy="50"
    r="20"
    fill="none"
    stroke-width="2"
    stroke-miterlimit="10"
  />
  </svg>
</div>
`;function qe(){K("isLoading",!0);let e=document.createElement("div");e.className="strigo-loader",e.innerHTML=Rt,document.body.appendChild(e)}function Xe(){let e=document.querySelector(".strigo-loader"),t=setInterval(()=>{e.style.opacity||(e.style.opacity="1");let i=parseFloat(e.style.opacity);i>0?e.style.opacity=(i-.1).toString():(K("isLoading",!1),e.style.pointerEvents="none",clearInterval(t))},200)}function Ze(){return!!ue("isLoading")}function Ct({key:e,oldValue:t,newValue:i}){if(e!=="strigoEvents")return;let a=JSON.parse(i)?.events,g=JSON.parse(t)?.events;a.filter(({eventName:p})=>!g.some(({eventName:w})=>p===w)).length>0&&fe()}function Qe(){window.addEventListener("message",e=>{if(!(!e||!e.data))switch(e.data){case"close":{window.Strigo&&window.Strigo.shutdown();break}case"rendered":{Ze()&&Xe();break}default:break}},!1),window.addEventListener("storage",Ct)}function et(e){e.addEventListener("load",Ye)}var me;(S=>{function t(){if(Ve(),se(),$e(),W&&ce())S.SDKType="SUBSCRIBER",window.dispatchEvent(new Event("strigo-opened"));else{S.SDKType="HOST";let p=U();p&&i(p)}l.info("init called")}S.init=t;function i(p){if(S.SDKType==="SUBSCRIBER")return;l.info("setup started");let{email:w,token:c,development:G=!1,version:I}=p,{webApiKey:b,subDomain:z}=Ue();if(!G&&(!w||!c||!b||!z)){l.error("Please provide setup data");return}He({email:w,initSite:Pe(),token:c,webApiKey:b,subDomain:z,development:G,version:I}),ae({currentUrl:U().initSite.href,isPanelOpen:!0,isLoading:!0}),xe(),Ce({parentElement:Ie(),url:Fe(G,I)}),qe();let A=Re(),_=ne({parentElement:A,url:ke(U()),classNames:Me,id:"exercises"});et(_),ne({parentElement:A,url:U().initSite.href,classNames:De,id:"original-site"}),we(["#exercises","#original-site"],{sizes:[25,75],maxSize:Ge(),minSize:be()}),Qe(),l.info("setup finished")}S.setup=i;function a(){l.info("shutdown called"),Je(),ge(),Ae()}S.shutdown=a;function g(p){je({eventName:p}),l.debug("sendEvent called",{eventName:p})}S.sendEvent=g})(me||={});window.Strigo=me;window.Strigo.init();})();
