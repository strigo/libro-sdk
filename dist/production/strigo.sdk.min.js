var B=Object.defineProperty;var H=(n,e)=>{for(var o in e)B(n,o,{get:e[o],enumerable:!0})};var h="7005";function A(){return document.getElementsByTagName("head")[0]}function g(){return document.getElementsByTagName("body")[0]}function b(){document.open(),document.close()}function C(n){let{url:e,parentElement:o}=n,i=document.createElement("link");i.rel="stylesheet",i.href=e,o.appendChild(i)}function c(n){let{url:e,parentElement:o,classNames:i}=n,t=document.createElement("iframe");t.classList.add(...i),t.src=e,o.appendChild(t)}function k(){location.reload()}var x="strigo.io",N="localhost:3000",L="https://cdn.jsdelivr.net/gh/strigo/strigo-sdk/dist/production/styles/strigo.min.css",G=["strigo-exercises"],D=["orig-iframe"];function X(n){let e={};for(let[o,i]of n)e[o]=i;return e}function y(){let{host:n,pathname:e,href:o,origin:i,search:t}=window.location;return{host:n,pathName:e,href:o,origin:i,search:t,params:Y(t)}}function Y(n){let o=new URLSearchParams(n).entries();return X(o)}function M(n){let{subDomain:e,token:o,webApiKey:i,development:t}=n;return t?`http://${N}/libro?token=${o.token}&webApiKey=${i}`:`https://${e}.${x}/libro?token=${o.token}&webApiKey=${i}`}function _(n,e){try{return JSON.parse(window[n].getItem(e))}catch(o){return console.log(o),null}}function a(n,e,o){try{return window[n].setItem(e,JSON.stringify(o)),o}catch(i){return console.log(i),null}}function l(n,e,o,i){try{let t=_(n,e);if(!t)throw new Error("Can't find initial state");let r={...t,[o]:i};return window[n].setItem(e,JSON.stringify(r)),r}catch(t){return console.log(t),null}}function s(n,e){try{window[n].removeItem(e)}catch(o){console.log(o)}}function P(){return _("localStorage","strigoConfig")}function w(n){return a("localStorage","strigoConfig",n)}function m(){return _("localStorage","strigoConfig")}function U(){s("localStorage","strigoConfig")}var E={};H(E,{clearSession:()=>u,getSession:()=>z,init:()=>S,isPanelOpen:()=>d,setSessionValue:()=>q,setup:()=>f});function S(){let n=_("sessionStorage","strigoSession");return n}function f(n){return a("sessionStorage","strigoSession",n)}function d(){return z()?.isPanelOpen}function z(){return _("sessionStorage","strigoSession")}function q(n,e){return l("sessionStorage","strigoSession",n,e)}function u(){s("sessionStorage","strigoSession")}window.onunload=function(){s("sessionStorage","strigoSession")};var O;(r=>{function e(){P(),S(),E&&d()?r.SDKType="SUBSCRIBER":r.SDKType="HOST",console.log("init called")}r.init=e;function o(K){if(r.SDKType==="SUBSCRIBER")return;console.log("setup started");let{email:I,token:v,webApiKey:T,subDomain:R,development:p=!1}=K;if(!p&&(!I||!v||!T||!R)){console.log("Please provide setup data");return}w({email:I,initSite:y(),token:v,webApiKey:T,subDomain:R,development:p}),b(),C({parentElement:A(),url:p?`http://localhost:${h}/styles/strigo.css`:L}),c({parentElement:g(),url:M(m()),classNames:G}),c({parentElement:g(),url:m().initSite.href,classNames:D}),f({currentUrl:m().initSite.href,isPanelOpen:!0}),console.log("setup finished")}r.setup=o;function i(){r.SDKType==="SUBSCRIBER"&&(U(),u(),k()),console.log("shutdown called")}r.shutdown=i;function t(){console.log("sendEvent called")}r.sendEvent=t})(O||={});window.StrigoSDK=O;window.StrigoSDK.init();
