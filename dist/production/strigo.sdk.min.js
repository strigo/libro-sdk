(()=>{var lt=Object.defineProperty;var ct=(e,n)=>{for(var i in n)lt(e,i,{get:n[i],enumerable:!0})};var p=typeof window!="undefined"?window:null,Q=p===null,L=Q?void 0:p.document,d="addEventListener",v="removeEventListener",X="getBoundingClientRect",z="_a",E="_b",h="_c",F="horizontal",y=function(){return!1},St=Q?"calc":["","-webkit-","-moz-","-o-"].filter(function(e){var n=L.createElement("div");return n.style.cssText="width:"+e+"calc(9px)",!!n.style.length}).shift()+"calc",Ee=function(e){return typeof e=="string"||e instanceof String},ve=function(e){if(Ee(e)){var n=L.querySelector(e);if(!n)throw new Error("Selector "+e+" did not match a DOM element");return n}return e},f=function(e,n,i){var a=e[n];return a!==void 0?a:i},V=function(e,n,i,a){if(n){if(a==="end")return 0;if(a==="center")return e/2}else if(i){if(a==="start")return 0;if(a==="center")return e/2}return e},ut=function(e,n){var i=L.createElement("div");return i.className="gutter gutter-"+n,i},gt=function(e,n,i){var a={};return Ee(n)?a[e]=n:a[e]=St+"("+n+"% - "+i+"px)",a},ft=function(e,n){var i;return i={},i[e]=n+"px",i},mt=function(e,n){if(n===void 0&&(n={}),Q)return{};var i=e,a,l,S,O,I,c;Array.from&&(i=Array.from(i));var C=ve(i[0]),T=C.parentNode,_=getComputedStyle?getComputedStyle(T):null,G=_?_.flexDirection:null,b=f(n,"sizes")||i.map(function(){return 100/i.length}),j=f(n,"minSize",100),$=Array.isArray(j)?j:i.map(function(){return j}),Y=f(n,"maxSize",1/0),Ze=Array.isArray(Y)?Y:i.map(function(){return Y}),qe=f(n,"expandToMin",!1),M=f(n,"gutterSize",10),D=f(n,"gutterAlign","center"),W=f(n,"snapOffset",30),Xe=Array.isArray(W)?W:i.map(function(){return W}),Z=f(n,"dragInterval",1),A=f(n,"direction",F),q=f(n,"cursor",A===F?"col-resize":"row-resize"),Qe=f(n,"gutter",ut),ue=f(n,"elementStyle",gt),et=f(n,"gutterStyle",ft);A===F?(a="width",l="clientX",S="left",O="right",I="clientWidth"):A==="vertical"&&(a="height",l="clientY",S="top",O="bottom",I="clientHeight");function N(o,t,r,s){var g=ue(a,t,r,s);Object.keys(g).forEach(function(u){o.style[u]=g[u]})}function tt(o,t,r){var s=et(a,t,r);Object.keys(s).forEach(function(g){o.style[g]=s[g]})}function k(){return c.map(function(o){return o.size})}function ge(o){return"touches"in o?o.touches[0][l]:o[l]}function fe(o){var t=c[this.a],r=c[this.b],s=t.size+r.size;t.size=o/this.size*s,r.size=s-o/this.size*s,N(t.element,t.size,this[E],t.i),N(r.element,r.size,this[h],r.i)}function nt(o){var t,r=c[this.a],s=c[this.b];!this.dragging||(t=ge(o)-this.start+(this[E]-this.dragOffset),Z>1&&(t=Math.round(t/Z)*Z),t<=r.minSize+r.snapOffset+this[E]?t=r.minSize+this[E]:t>=this.size-(s.minSize+s.snapOffset+this[h])&&(t=this.size-(s.minSize+this[h])),t>=r.maxSize-r.snapOffset+this[E]?t=r.maxSize+this[E]:t<=this.size-(s.maxSize-s.snapOffset+this[h])&&(t=this.size-(s.maxSize+this[h])),fe.call(this,t),f(n,"onDrag",y)(k()))}function me(){var o=c[this.a].element,t=c[this.b].element,r=o[X](),s=t[X]();this.size=r[a]+s[a]+this[E]+this[h],this.start=r[S],this.end=r[O]}function rt(o){if(!getComputedStyle)return null;var t=getComputedStyle(o);if(!t)return null;var r=o[I];return r===0?null:(A===F?r-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight):r-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),r)}function pe(o){var t=rt(T);if(t===null||$.reduce(function(u,m){return u+m},0)>t)return o;var r=0,s=[],g=o.map(function(u,m){var w=t*u/100,U=V(M,m===0,m===o.length-1,D),B=$[m]+U;return w<B?(r+=B-w,s.push(0),B):(s.push(w-B),w)});return r===0?o:g.map(function(u,m){var w=u;if(r>0&&s[m]-r>0){var U=Math.min(r,s[m]-r);r-=U,w=u-U}return w/t*100})}function ot(){var o=this,t=c[o.a].element,r=c[o.b].element;o.dragging&&f(n,"onDragEnd",y)(k()),o.dragging=!1,p[v]("mouseup",o.stop),p[v]("touchend",o.stop),p[v]("touchcancel",o.stop),p[v]("mousemove",o.move),p[v]("touchmove",o.move),o.stop=null,o.move=null,t[v]("selectstart",y),t[v]("dragstart",y),r[v]("selectstart",y),r[v]("dragstart",y),t.style.userSelect="",t.style.webkitUserSelect="",t.style.MozUserSelect="",t.style.pointerEvents="",r.style.userSelect="",r.style.webkitUserSelect="",r.style.MozUserSelect="",r.style.pointerEvents="",o.gutter.style.cursor="",o.parent.style.cursor="",L.body.style.cursor=""}function it(o){if(!("button"in o&&o.button!==0)){var t=this,r=c[t.a].element,s=c[t.b].element;t.dragging||f(n,"onDragStart",y)(k()),o.preventDefault(),t.dragging=!0,t.move=nt.bind(t),t.stop=ot.bind(t),p[d]("mouseup",t.stop),p[d]("touchend",t.stop),p[d]("touchcancel",t.stop),p[d]("mousemove",t.move),p[d]("touchmove",t.move),r[d]("selectstart",y),r[d]("dragstart",y),s[d]("selectstart",y),s[d]("dragstart",y),r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.MozUserSelect="none",r.style.pointerEvents="none",s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none",s.style.pointerEvents="none",t.gutter.style.cursor=q,t.parent.style.cursor=q,L.body.style.cursor=q,me.call(t),t.dragOffset=ge(o)-t.end}}b=pe(b);var x=[];c=i.map(function(o,t){var r={element:ve(o),size:b[t],minSize:$[t],maxSize:Ze[t],snapOffset:Xe[t],i:t},s;if(t>0&&(s={a:t-1,b:t,dragging:!1,direction:A,parent:T},s[E]=V(M,t-1===0,!1,D),s[h]=V(M,!1,t===i.length-1,D),G==="row-reverse"||G==="column-reverse")){var g=s.a;s.a=s.b,s.b=g}if(t>0){var u=Qe(t,A,r.element);tt(u,M,t),s[z]=it.bind(s),u[d]("mousedown",s[z]),u[d]("touchstart",s[z]),T.insertBefore(u,r.element),s.gutter=u}return N(r.element,r.size,V(M,t===0,t===i.length-1,D),t),t>0&&x.push(s),r});function de(o){var t=o.i===x.length,r=t?x[o.i-1]:x[o.i];me.call(r);var s=t?r.size-o.minSize-r[h]:o.minSize+r[E];fe.call(r,s)}c.forEach(function(o){var t=o.element[X]()[a];t<o.minSize&&(qe?de(o):o.minSize=t)});function st(o){var t=pe(o);t.forEach(function(r,s){if(s>0){var g=x[s-1],u=c[g.a],m=c[g.b];u.size=t[s-1],m.size=r,N(u.element,u.size,g[E],u.i),N(m.element,m.size,g[h],m.i)}})}function at(o,t){x.forEach(function(r){if(t!==!0?r.parent.removeChild(r.gutter):(r.gutter[v]("mousedown",r[z]),r.gutter[v]("touchstart",r[z])),o!==!0){var s=ue(a,r.a.size,r[E]);Object.keys(s).forEach(function(g){c[r.a].element.style[g]="",c[r.b].element.style[g]=""})}})}return{setSizes:st,getSizes:k,collapse:function(t){de(c[t])},destroy:at,parent:T,pairs:x}},ye=mt;function Oe(){return document.getElementsByTagName("head")[0]}function he(){document.open(),document.close()}function Ie(){let e=document.createElement("div");return e.className="strigo-main",document.body.appendChild(e),e}function Te(e){let{url:n,parentElement:i}=e,a=document.createElement("link");a.rel="stylesheet",a.href=n,i.appendChild(a)}function ee(e){let{url:n,parentElement:i,classNames:a,id:l}=e,S=document.createElement("iframe");return S.classList.add(...a),S.id=l,S.src=n,i.appendChild(S),S}function xe(){location.reload()}function we(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}var Re="strigo-sdk",Ae="strigo.io",Ce="localhost:3000",_e="https://cdn.jsdelivr.net/gh/strigo/strigo-sdk@latest/dist/production/styles/strigo.min.css",Ge=["strigo-exercises"],be=["orig-iframe"],Me=0,Ne=450;function dt(e){let n={};for(let[i,a]of e)n[i]=a;return n}function ze(){let{host:e,pathname:n,href:i,origin:a,search:l}=window.location;return{host:e,pathName:n,href:i,origin:a,search:l,params:vt(l)}}function vt(e){let i=new URLSearchParams(e).entries();return dt(i)}function Le(e){let{subDomain:n,token:i,webApiKey:a,development:l}=e;return l?`http://${Ce}/libro/courses?token=${i.token}&webApiKey=${a}`:`https://${n}.${Ae}/libro/courses?token=${i.token}&webApiKey=${a}`}function Pe(){let e=document.getElementById(Re);return{webApiKey:e.getAttribute("data-web-api-key"),subDomain:e.getAttribute("data-subdomain")}}function R(e,n){try{return JSON.parse(window[e].getItem(n))}catch(i){return console.log(i),null}}function H(e,n,i){try{return window[e].setItem(n,JSON.stringify(i)),i}catch(a){return console.log(a),null}}function te(e,n,i,a){try{let l=R(e,n);if(!l)throw new Error("Can't find initial state");let S={...l,[i]:a};return window[e].setItem(n,JSON.stringify(S)),S}catch(l){return console.log(l),null}}function P(e,n){try{window[e].removeItem(n)}catch(i){console.log(i)}}function ke(){return R("localStorage","strigoConfig")}function Ue(e){return H("localStorage","strigoConfig",e)}function K(){return R("localStorage","strigoConfig")}function Be(){P("localStorage","strigoConfig")}var ae={};ct(ae,{clearSession:()=>se,getSession:()=>Fe,init:()=>re,isPanelOpen:()=>ie,setSessionValue:()=>Ot,setup:()=>oe});function re(){let e=R("sessionStorage","strigoSession");return e}function oe(e){return H("sessionStorage","strigoSession",e)}function ie(){return Fe()?.isPanelOpen}function Fe(){return R("sessionStorage","strigoSession")}function Ot(e,n){return te("sessionStorage","strigoSession",e,n)}function se(){P("sessionStorage","strigoSession")}window.onunload=function(){P("sessionStorage","strigoSession")};function Ve(){try{let e=J();if(e)return console.log("Events storage already exists"),e;let n={events:[]};return window["localStorage"].setItem("strigoEvents",JSON.stringify(n)),n}catch(e){return console.log("Init events storage error",{error:e}),null}}function J(){try{return JSON.parse(window["localStorage"].getItem("strigoEvents"))}catch(e){return console.log("Get events storage error",{error:e}),null}}function He(e){try{let n=J();if(!n)throw new Error("Can't find initial state");return n.events.push(e),window["localStorage"].setItem("strigoEvents",JSON.stringify(n)),n}catch(n){return console.log("Push event to storage error",{error:n}),null}}function Ke(){try{let e=J();if(!e)throw new Error("Can't find events storage");let n=e.events.pop();return window["localStorage"].setItem("strigoEvents",JSON.stringify(e)),n}catch(e){return console.log("Pop event from storage error",{error:e}),null}}function le(){try{let e=J();if(!e)throw new Error("Can't find events storage");return e.events.pop()}catch(e){return console.log("Get event from storage error",{error:e}),null}}function ce(){let e=le();if(e){console.log("Posting event",e),window.frames[0].postMessage(e,"*");let n=Ke();e.eventName!==n.eventName&&console.error("Events storage error: popped event doesn't match new event",{newEvent:e,poppedEvent:n})}}function je(){for(;le();)ce()}function ht({key:e,oldValue:n,newValue:i}){if(e!=="strigoEvents")return;let a=JSON.parse(i)?.events,l=JSON.parse(n)?.events;a.filter(({eventName:O})=>!l.some(({eventName:I})=>O===I)).length>0&&ce()}function Ye(){window.addEventListener("message",e=>{if(!(!e||!e.data))switch(e.data){case"close":{window.StrigoSDK&&window.StrigoSDK.shutdown();break}default:break}},!1),window.addEventListener("storage",ht)}var Tt=`
<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto; animation-play-state: running; animation-delay: 0s;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
<circle cx="50" cy="50" r="0" fill="none" stroke="#ffffff" stroke-width="2" style="animation-play-state: running; animation-delay: 0s;">
  <animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="0s" style="animation-play-state: running; animation-delay: 0s;"></animate>
  <animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="0s" style="animation-play-state: running; animation-delay: 0s;"></animate>
</circle><circle cx="50" cy="50" r="0" fill="none" stroke="#f1f1f9" stroke-width="2" style="animation-play-state: running; animation-delay: 0s;">
  <animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.5s" style="animation-play-state: running; animation-delay: 0s;"></animate>
  <animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.5s" style="animation-play-state: running; animation-delay: 0s;"></animate>
</circle>
</svg>`;function We(e){let n=document.createElement("div");n.className="strigo-loader",n.innerHTML=Tt,document.body.appendChild(n);let i=document.querySelector(".strigo-loader"),a=()=>{let l=setInterval(()=>{i.style.opacity||(i.style.opacity="1");let S=parseFloat(i.style.opacity);S>0?i.style.opacity=(S-.1).toString():(i.style.pointerEvents="none",clearInterval(l))},200)};e.addEventListener("load",a)}var Se;(S=>{function n(){ke(),re(),Ve(),ae&&ie()?S.SDKType="SUBSCRIBER":S.SDKType="HOST",console.log("init called")}S.init=n;function i(O){if(S.SDKType==="SUBSCRIBER")return;console.log("setup started");let{email:I,token:c,development:C=!1}=O,{webApiKey:T,subDomain:_}=Pe();if(!C&&(!I||!c||!T||!_)){console.log("Please provide setup data");return}Ue({email:I,initSite:ze(),token:c,webApiKey:T,subDomain:_,development:C}),he(),Te({parentElement:Oe(),url:C?`http://localhost:${SDK_HOSTING_PORT}/styles/strigo.css`:_e});let G=Ie(),b=ee({parentElement:G,url:Le(K()),classNames:Ge,id:"exercises"});We(b),ee({parentElement:G,url:K().initSite.href,classNames:be,id:"original-site"}),ye(["#exercises","#original-site"],{sizes:[25,75],minSize:we()?Me:Ne}),oe({currentUrl:K().initSite.href,isPanelOpen:!0}),je(),Ye(),console.log("setup finished")}S.setup=i;function a(){console.log("shutdown called"),Be(),se(),xe()}S.shutdown=a;function l(O){He({eventName:O}),console.log("sendEvent called",{eventName:O})}S.sendEvent=l})(Se||={});window.StrigoSDK=Se;window.StrigoSDK.init();})();
