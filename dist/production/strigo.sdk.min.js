(()=>{var k=Object.defineProperty;var K=(o,e)=>{for(var t in e)k(o,t,{get:e[t],enumerable:!0})};function x(){return document.getElementsByTagName("head")[0]}function l(){return document.getElementsByTagName("body")[0]}function A(){document.open(),document.close()}function G(o){let{url:e,parentElement:t}=o,n=document.createElement("link");n.rel="stylesheet",n.href=e,t.appendChild(n)}function p(o){let{url:e,parentElement:t,classNames:n}=o,r=document.createElement("iframe");r.classList.add(...n),r.src=e,t.appendChild(r)}function L(){location.reload()}var N="strigo.io",w="localhost:3000",h="https://cdn.jsdelivr.net/gh/strigo/strigo-sdk/dist/production/styles/strigo.min.css",y=["strigo-exercises"],P=["orig-iframe"];function $(o){let e={};for(let[t,n]of o)e[t]=n;return e}function D(){let{host:o,pathname:e,href:t,origin:n,search:r}=window.location;return{host:o,pathName:e,href:t,origin:n,search:r,params:V(r)}}function V(o){let t=new URLSearchParams(o).entries();return $(t)}function B(o){let{subDomain:e,token:t,webApiKey:n,development:r}=o;return r?`http://${w}/libro/courses?token=${t.token}&webApiKey=${n}`:`https://${e}.${N}/libro/courses?token=${t.token}&webApiKey=${n}`}function s(o,e){try{return JSON.parse(window[o].getItem(e))}catch(t){return console.log(t),null}}function a(o,e,t){try{return window[o].setItem(e,JSON.stringify(t)),t}catch(n){return console.log(n),null}}function f(o,e,t,n){try{let r=s(o,e);if(!r)throw new Error("Can't find initial state");let i={...r,[t]:n};return window[o].setItem(e,JSON.stringify(i)),i}catch(r){return console.log(r),null}}function S(o,e){try{window[o].removeItem(e)}catch(t){console.log(t)}}function M(){return s("localStorage","strigoConfig")}function U(o){return a("localStorage","strigoConfig",o)}function g(){return s("localStorage","strigoConfig")}function F(){S("localStorage","strigoConfig")}var T={};K(T,{clearSession:()=>d,getSession:()=>b,init:()=>u,isPanelOpen:()=>O,setSessionValue:()=>q,setup:()=>m});function u(){let o=s("sessionStorage","strigoSession");return o}function m(o){return a("sessionStorage","strigoSession",o)}function O(){return b()?.isPanelOpen}function b(){return s("sessionStorage","strigoSession")}function q(o,e){return f("sessionStorage","strigoSession",o,e)}function d(){S("sessionStorage","strigoSession")}window.onunload=function(){S("sessionStorage","strigoSession")};var E;(i=>{function e(){M(),u(),T&&O()?i.SDKType="SUBSCRIBER":i.SDKType="HOST",console.log("init called")}i.init=e;function t(v){if(i.SDKType==="SUBSCRIBER")return;console.log("setup started");let{email:I,token:R,webApiKey:C,subDomain:_,development:c=!1}=v;if(!c&&(!I||!R||!C||!_)){console.log("Please provide setup data");return}U({email:I,initSite:D(),token:R,webApiKey:C,subDomain:_,development:c}),A(),G({parentElement:x(),url:c?`http://localhost:${SDK_HOSTING_PORT}/styles/strigo.css`:h}),p({parentElement:l(),url:B(g()),classNames:y}),p({parentElement:l(),url:g().initSite.href,classNames:P}),m({currentUrl:g().initSite.href,isPanelOpen:!0}),console.log("setup finished")}i.setup=t;function n(){i.SDKType==="SUBSCRIBER"&&(F(),d(),L()),console.log("shutdown called")}i.shutdown=n;function r(){console.log("sendEvent called")}i.sendEvent=r})(E||={});window.StrigoSDK=E;window.StrigoSDK.init();})();
